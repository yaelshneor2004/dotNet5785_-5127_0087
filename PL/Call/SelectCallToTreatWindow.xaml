<Window x:Class="PL.Call.SelectCallToTreatWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PL.Call"
        mc:Ignorable="d"
        Title="SelectCallToTreatWindow" Height="640" Width="800"
        DataContext="{Binding RelativeSource={RelativeSource Mode=Self}}"
        Language="he-IL">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40*"/>
            <RowDefinition Height="500*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!-- New row for the TextBox -->
        </Grid.RowDefinitions>

        <!-- Internal, Upper Grid for Filters and Sorting -->
        <Grid HorizontalAlignment="Stretch" Grid.Row="0" VerticalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Grid.Row="0" VerticalAlignment="Center" Margin="8,0,8,0">
                <!-- ComboBox for filtering calls by type -->
                <ComboBox SelectedValue="{Binding FilterByType, Mode=TwoWay}" 
              ItemsSource="{Binding Source={StaticResource SortCollectionMyCallTypeKey}}" 
              SelectionChanged="cmbFiltedrChanges_SelectionChanged" 
              Height="43" Width="785"/>
                <!-- ComboBox for filtering calls by type -->
                <!-- ComboBox for filtering calls by type -->
                <!-- ComboBox for filtering calls by type -->
            </StackPanel>
        </Grid>
        <!-- DataGrid for displaying the list of open calls -->
        <DataGrid Margin="5,9,5,6" Grid.Row="1" 
                  ItemsSource="{Binding Path=OpenCallList}" 
                  AutoGenerateColumns="False" 
                  IsReadOnly="True" 
                  EnableRowVirtualization="True" 
                  RowDetailsVisibilityMode="VisibleWhenSelected" 
                  SelectedItem="{Binding SelectedOpenCall}"
                  MouseLeftButtonUp="DataGrid_MouseLeftButtonUp">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Id}" Header="Call Id" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding Type}" Header="Type" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding Description}" Header="Description" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding Address}" Header="Address" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding StartTime}" Header="Start Time" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding MaxEndTime}" Header="Max End Time" Width="Auto"/>
                <DataGridTextColumn Binding="{Binding DistanceFromVolunteer}" Header="Distance" Width="Auto"/>
                <DataGridTemplateColumn Header="Select" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="Select" Command="{Binding DataContext.SelectCallCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" CommandParameter="{Binding}" Click="SelectCall_Click"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
        <!-- TextBox and Button for changing volunteer address -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Row="3" VerticalAlignment="Center" Margin="8,0,8,0">
            <TextBox Text="{Binding CurrentVolunteer.Address, Mode=TwoWay}" Width="200" Margin="0,0,8,0" />
            <Button Content="Update Address" Click="UpdateAddress_Click" Height="30"/>
        </StackPanel>
    </Grid>
</Window>
